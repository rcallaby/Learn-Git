# ブランチとマージの基本

## 目次
- [ブランチとその目的の紹介](#introduction-to-branches-and-their-purpose)
- [ブランチの作成と切り替え](#creating-and-switching-between-branches)
- [ブランチの履歴の管理と変更のマージ](#managing-branch-history-and-merging-changes)
- [マージの衝突の処理](#handling-merge-conflicts)
- [結論](#conclusion)

## ブランチとその役割

ソフトウェア開発において、Gitのブランチ機能は非常に重要です。ブランチは、リポジトリの特定のコミットを指す軽量なポインタです。これを使うことで、開発者たちは以下のことが可能になります

- プロジェクトの異なる部分を同時に開発する
- 新機能やバグ修正を試験的に行う
- メインのコードベースに影響を与えずに変更を加える

ブランチを活用することで、開発プロセスが柔軟になり、並行作業が容易になります。

## ブランチの作成と切り替え方

新しいブランチを作るには、「git branch」コマンドを使います。例えば

```
git branch feature-branch
```

このコマンドは新しいブランチを作成しますが、自動的にそのブランチに切り替わることはありません。

作成したブランチに移動するには、「git checkout」コマンドを使います

```
git checkout feature-branch
```

Git 2.23以降では、ブランチの作成と移動を一度に行える便利なコマンドが導入されました

```
git checkout -b feature-branch
```

このコマンドは新しいブランチを作成し、同時にそのブランチに切り替えます。

## ブランチの履歴管理と変更のマージ

各ブランチは独自のコミット履歴を持ちます。開発者はブランチ上で作業を進め、変更をコミットし、そのブランチ固有の履歴を構築していきます。

ブランチでの作業が完了したら、その変更を他のブランチ（通常はメインブランチ）に統合します。これを「マージ」と呼びます。

例えば、「feature-branch」の変更をメインブランチにマージする場合

```
git checkout main
git merge feature-branch
```

この操作により、「feature-branch」の変更がメインブランチに統合され、コミット履歴が結合されます。

## マージ時の衝突解決

マージ時に、同じ箇所が異なる方法で変更されていると、衝突（コンフリクト）が発生します。この場合、Gitは自動的に解決できないため、開発者が手動で衝突を解決する必要があります。

衝突が起きたファイルを開くと、Gitが衝突箇所を次のようなマーカーで明示します

```
<<<<<<< HEAD
現在のブランチの内容
=======
マージしようとしているブランチの内容
>>>>>>> feature-branch
```

開発者はこれを見て、どちらの変更を採用するか、または両方を組み合わせるかを決めます。

衝突を解決したら、変更をステージングしてコミットすることで、マージを完了させます

```
git add <解決したファイル>
git commit -m "Merge branch 'feature-branch'"
```

## まとめ

Gitのブランチ機能は、コードの進化と共同作業を効率的に管理するための重要なツールです。ブランチを上手く活用することで、開発チームは以下のメリットを得られます

- 生産性の向上
- 並行作業の実現
- コードの品質向上

ブランチの作成、切り替え、履歴管理、そしてマージの方法を理解することで、開発者はGitを効果的に使い、より構造化された効率的な開発プロセスを維持できます。